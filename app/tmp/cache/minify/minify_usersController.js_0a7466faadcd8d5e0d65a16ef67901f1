var usersController=function($scope,$filter,Origin){$scope.editor={};$scope.editorModal={};$scope.status={};$scope.users={};$scope.loadUsers=function(){Origin.get('users').then(function(response){$scope.users=$scope.$parent.listRefresh(response);});}
$scope.userCreate=function(){$scope.editor.route='dashboardUserAdd';Origin.post($scope.editor).then(function(response){$scope.$parent.notificationOpen('User created');$scope.loadUsers();$scope.editor={};});}
$scope.userEdit=function(model){$scope.$parent.originModalOpen();$scope.editorModal=angular.copy(model.User);$scope.editorModal.password=$scope.editorModal.cpassword='';}
$scope.userRemove=function(){}
$scope.userSave=function(){$scope.editorModal.route='dashboardUserUpdate';Origin.post($scope.editorModal).then(function(){$scope.loadUsers();$scope.$parent.originModalClose();$scope.$parent.notificationOpen('User updated');});}
$scope.toggleStatus=function(id,status){$scope.status.route='dashboardUserStatus';$scope.status.id=id;switch(status){case'disable':$scope.status.status=0;var notification={message:'User disabled',type:'alert'}
break;case'enable':$scope.status.status=1;var notification={message:'User enabled',type:'default'}
break;}
Origin.post($scope.status).then(function(){$scope.loadUsers();$scope.$parent.notificationOpen(notification.message,notification.type);});}
$scope.loadUsers();}