'use strict';var monitorCtrl=function($scope,Monitor){$scope.monitorObj={};$scope.monitor_filter={};$scope.monitor_totals={};$scope.monitor_list={};$scope.monitor={};Monitor.get('list').then(function(data){$scope.monitor_filter=data.filter;$scope.monitor_totals=data.total;$scope.monitor_list=data.data;$scope.monitor_title='Event Category';});Monitor.get('visits').then(function(data){$scope.monitor_visits=data.visits;});$scope.getData=function(){$scope.monitorObj.category=($scope.monitorObj.category==''?'undefined':$scope.monitorObj.category);Monitor.get('list/'+$scope.monitorObj.start_date+'/'+$scope.monitorObj.end_date+'/'+$scope.monitorObj.category).then(function(data){$scope.monitorObj.category=($scope.monitorObj.category=='undefined'?'':$scope.monitorObj.category);$scope.refreshMonitor(data);});}
$scope.parseDate=function(date){var d=new Date(date);var month=d.getMonth()+1;var day=d.getDate();var year=d.getFullYear();if(month<10)month='0'+month;if(day<10)day='0'+day;return year+'-'+month+'-'+day;}
$scope.exportData=function(){$scope.monitor.route='monitorExport';$scope.monitor.type='multiple';$scope.monitor.monitor_filter=$scope.monitor_filter;$scope.monitor.monitor_totals=$scope.monitor_totals;$scope.monitor.monitor_list=$scope.monitor_list;Monitor.post($scope.monitor).then(function(response){});}
$scope.refreshMonitor=function(data){$scope.monitor_list=data.data;$scope.monitor_filter=data.filter;$scope.monitor_totals=data.total;Monitor.get('visits/'+$scope.monitor_filter.start_date+'/'+$scope.monitor_filter.end_date+'/'+$scope.monitorObj.category).then(function(data){$scope.monitor_visits=data.visits;});}
$scope.categoryData=function(category){if($scope.monitor_title!='Event Action'){Monitor.get('event/'+category).then(function(data){$scope.monitorObj.category=category;$scope.refreshMonitor(data);$scope.monitor_title='Event Action';});}}}